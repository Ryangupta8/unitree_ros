<?xml version="1.0"?>
<launch>
    <arg name="rname" default="a1"/>
    <arg name="ctrl_level" default="highlevel"/>

    <node pkg="unitree_legged_real" type="lcm_server" name="node_lcm_server"
          respawn="false" output="screen" args="$(arg rname) $(arg ctrl_level)" />
    <node pkg="unitree_legged_real" type="a1_121_initialpose_convert" name="a1_121_initialpose_convert"/>
 
  <!-- Include Robot description from URDF in order to get frame transforms -->
  <!--<node pkg="robot_state_publisher" type="robot_state_publisher" name="robot_state_publisher" >-->
    <!--<remap from="robot_description" to="a1_121_description" />-->
  <!--</node>-->

  <!--<node name="joint_state_publisher" pkg="joint_state_publisher" type="joint_state_publisher" >-->
    <!--<remap from="robot_description" to="a1_121_description" />-->
  <!--</node>-->

  <!-- Use standard ROS navigation stack through move_base? If not, specify vector maps for graph_navigation -->
  <arg name="move_base" default="false"/>
  <arg name="graph_map_location" default="$(find a1_autonomy)/enml/maps"/>
  <arg name="graph_map_name" default="ASE4"/>
  <arg name="odom_topic" default="/odom"/>
  <arg name="scan_topic" default="/depth2scan"/><!--/depth2scan /scan /cloud2scan -->
  <arg name="localization_topic" default="/localization"/>
  <arg name="loc_topic" default="/localization"/>
  <!-- <arg name="max_speed" default="0.2f"/> -->

  <param name="use_sim_time" value="false"/>

    <param name="robot_name" value="$(arg rname)"/>
    <param name="control_level" value="$(arg ctrl_level)"/>

  <!--ase1-->
  <!--<node name ="enmap_to_rosmap" pkg="tf" type="static_transform_publisher" args="19.5 21 0 0.0 0 0.00 map_en map 100"/>-->
  <!--ase4-->
  <!--ase4-->
  <!--<node name ="enmap_to_rosmap" pkg="tf" type="static_transform_publisher" args="21.0 37 0 0.0 0 0.00 map_en map 100"/>-->
  <node name ="enmap_to_rosmap" pkg="tf" type="static_transform_publisher" args="-21.0 -37 0 0.0 0 0.00 map map_en 100"/>
  <!--<node name ="enmap_to_rosmap" pkg="tf" type="static_transform_publisher" args="-54 15 0 -1.57 0 0.00 map map_en 100"/>-->
  <node name="a1_odomtest" pkg="search_service" type="a1_odomtest" output="screen"/>
  <!--<node name="a1_odom" pkg="search_service" type="a1_odom" output="screen"/>-->

  <!-- Run the SDK Driver -->
  <node pkg="unitree_legged_real" type="a1_driver_main" name="a1_driver_node"
          respawn="false" output="screen" args="$(arg rname) $(arg ctrl_level)" />
    <!-- ENML -->
    <node pkg="a1_autonomy" type="enml_a1_121" name="non_markov_localization_a1_121" output="screen" args="--config_dir $(find a1_autonomy)/config --robot_config a1-121_real_mas.lua --maps_dir $(find a1_autonomy)/enml/maps -d1" />

</launch>

